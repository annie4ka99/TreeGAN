 private void packBoxConfiguration(byte[] newPackedBoxConfiguration, byte[] unpackedBoxConfiguration) { int bytePosition = 0, bitPosition = 0; for (int i = 0; i < boxPositionsCount; i++) { bytePosition = i >> 3; bitPosition = i & 7; if ((unpackedBoxConfiguration[boxInternalToExternalPosition[i]] & BOX) == BOX) newPackedBoxConfiguration[bytePosition] |= 1 << bitPosition; else newPackedBoxConfiguration[bytePosition] &= (255 - (1 << bitPosition)); } } 